# Результаты эксперементов обучения с различными параметрами.

https://docs.google.com/spreadsheets/d/1NlG5yLEFSjvPqFTi0v1aBQMqhFS7W2CelVXlGF2BFhI/edit#gid=0



# Получение результатов сети на изображениях <a name="validation"></a>

validate.py позволяет работать с моделями, обученными только на один класс.

Пропустить все картинки через сеть можно двумя командами:
```
bash validate.sh

или

python3 validate.py -d путь_к_папке_val -cd путь_к_папке_с_чекпоинтом

python3 validate.py [-h] [-c CHECK_PATH] [-cd CHECK_DIR] [-t THRES]
                   [-d DATASET_DIR] [-o OUTPUT_DIR] [--vis] [--no-plots]
                   [--only-plots] [--com] [--tile-size TILE_SIZE] [--cpu]
                   [--device DEVICE]
```
Параметры, передаваемые в скрипт validate.py:

| Short       | Long                | Тип                 | Значение по умолчанию                         | Описание                                                                                                                                                                                      |
|-------------|---------------------|---------------------|-----------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| -c          | --check-path        | type=str            |                                               | Полный путь до чекпоинта.                                                                                                                                                                     |
| -cd         | --check-dir         | type=str            |                                               | Путь папки где лежит *.pth файл. Если файлов несколько, то будет считан произвольный из них. Эта функция удобна, т.к. не требуется указывать имя чекпоинта, если файл чекпоинта один в папке. |
| -t          | --thres             | type=float          | default=0.5                                   | Порог для бинаризации выхода сети. Сеть выдает значения типа float от 0 до 1, а для подсчета метрик нужна бинарная разметка, и для этого используется порог.                                  |
| -d          | --dataset-dir       | type=str            |                                               | Путь к папке val или train. Важно что по пути --dataset-dir все картинки одинакового размера равному размеру тайла.                                                                           |
| -o          | --output-dir        | type=str            | По умолчанию output пишется в папку чекпоинта | Путь куда сохранить результаты.                                                                                                                                                               | 
| --vis       |                     | action='store_true' |                                               | visualize plot with result on one image.                                                                                                                                                      |
| --plots     |                     | action='store_true' |                                               | Cохраняем снимок/выход сети/ разметку в одну картинку в папку plots. На выходе сети синим отмечены значения выше порога, а оттенками серого - меньше порога.                                  |
| --binary    |                     | action='store_true' |                                               | Сохраняем выход сети после пороговой обработки.                                                                                                                                               |
| --raw       |                     | action='store_true' |                                               | Сохраняем выход сети без пороговой обработки.                                                                                                                                                 |
| --com       | --calc-only-metrics | action='store_true' |                                               | Не сохранять выход сети на диск, только считать метрики.                                                                                                                                      |
| --tile-size |                     | type=int            | default=512                                   | The size of images will be RESIZED to tile-size.                                                                                                                                              |
| --cpu       |                     | action='store_true' |                                               | Использовать cpu для вычислений.                                                                                                                                                              |
| --device    | type=str            | default=cuda        |                                               | cuda or cpu                                                                                                                                                                                   |











